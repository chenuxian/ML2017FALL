import csv
import sys
import codecs
import pandas

w = [0.18463394008529868, -0.0035558047129865375, -0.0066704479348644267, -0.0025363762931905069, 0.0088784868745457809, 0.0083039783784704061, -0.011309304360774713, -0.009068225519595928, 0.037757656732208753, 0.10353023149989163, 0.018841905940948617, -0.0034391210726609522, 0.011567157014782857, -0.016017412199262754, 0.018422700767274622, 0.053445039179568422, -0.067856267224470676, 0.17219736854735587, 0.56338846636315631, 5.1497395722691539e-05, -2.915970302940795e-05, 5.6610605362236117e-05, 8.9138169306615046e-05, -0.00050950690015051485, 0.00023950991849488391, 0.00023347525126415553, -0.00068750226462100479, 0.00010738241872643117, -0.00074734897804333263, 0.00020535791980475185, 0.0017620710307275919, -0.0021484257831544617, -1.2314156061534231e-05, 0.0044954747059972235, -0.006006594785691162, -0.0015412312044363625, 0.0051825550055175675]


index = 0
with open(sys.argv[2], 'w', encoding='utf-8') as f:
    spamwriter = csv.writer(f, delimiter=',')
    spamwriter.writerow(['id', 'value'])
    data = pandas.read_csv(sys.argv[1], header = -1).values.tolist()
    len_data = len(data)
    # start testing x_vector to get y
    for i in range(0, len_data, 18):
        x = []
        x += data[i+8][2:11]
        x += data[i+9][2:11]
        for j in range(i+8, i+10):
            for k in range(2, 11):
                x.append(float(data[j][k]) ** 2)

        # add bias
        inner_product = w[0]
        # do inner product
        for m in range(1, 37):
            inner_product += w[m] * float(x[m-1])
        spamwriter.writerow(['id_'+str(index), inner_product])
        index += 1
